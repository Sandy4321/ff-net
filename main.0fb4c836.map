{"version":3,"sources":["js/svg.js","js/math.js","js/Color.js","js/Neuron.js","js/Link.js","js/Layer.js","js/NeuralNet.js","js/DataPoint.js","js/DataCanvas.js","js/ErrorPlot.js","js/ControlPanel.js","js/data.js","js/main.js"],"names":["svg","element","document","createElementNS","module","exports","math","n","decimalDigits","factor","i","str","Math","round","toString","dotPosition","indexOf","length","exp","sigmoid","Color","r","g","b","a","WHITE","BLACK","RED","BLUE","LIGHT_BLUE","LIGHT_RED","p","prototype","blend","c","t","abs","source","target","floor","require","radius","strokeWidth","Neuron","layer","bias","links","backLinks","preActivation","activation","dActivation","dPreActivation","dBias","isInput","isOutput","svgElement","createElement","setAttribute","redraw","circle","position","getPosition","x","y","maxVisibleBias","tFillColor","fillColor","strokeColor","getIndex","neurons","neuralNet","neuronCount","layerCount","layers","container","parentNode","containerRect","getBoundingClientRect","width","height","cy","dx","dy","maxNeuronCountPerLayer","forward","link","weight","n0","backward","regularization","regularizationError","dWeight","dSigmoid","applyGradient","learningRate","reset","newFromData","data","addNeuron","toData","Link","nf","path","p0","pf","maxVisibleWeight","color","min","addLink","Layer","neuron","push","svgNeurons","appendChild","getNeuronAt","getNeuronCount","addLayer","NeuralNet","svgLinks","addFullyConnectedLayer","l0","lf","j","input","randomizeParameters","random","layerData","linkData","DataPoint","canvas","label","ctx","domElement","beginPath","fillStyle","strokeStyle","arc","PI","fill","stroke","DataCanvas","dataPoints","getContext","pixelColors","setUpDragBehavior","addDataPoint","classify","canvasWidth","canvasHeight","fWidth","fHeight","canvasImageData","getImageData","clearRect","ii","jj","putImageData","computeCursor","event","rect","clientX","clientY","touches","left","cursor","top","dragState","handleDragBegin","bind","addEventListener","handleDragProgress","window","handleDragEnd","preventDefault","dataPoint","offset","dataCanvas","item","minTopError","ErrorPlot","id","maxDataLength","topError","getMaxTotalError","max","totalError","update","dataError","shift","maxTotalError","moveTo","lineTo","ControlPanel","controllableParameters","div","row","className","rows","rowsByLabel","addRow","btnRandomize","innerHTML","cells","control","value","errorPlot","addCell","cell","type","roundToString","init","body","svgNeuralNet","controlPanel","output","d","requestAnimationFrame","getData"],"mappings":"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,EAAA,GAAY,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,GAAY,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,GAAY,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,GAAY,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,GAAY,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,GAAY,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,GAAY,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,GAAY,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,GAAY,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,GAAY,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,IAAS,EAAA,IAAa,MAAA,GAAG,CAAK,EAAA,GAAQ,EAAA,GAAY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","file":"main.0fb4c836.map","sourceRoot":"..","sourcesContent":["var svg = {};\n\nsvg.createElement = function(element) {\n\treturn document.createElementNS(\"http://www.w3.org/2000/svg\", element);\n}\n\nmodule.exports = svg;\n","var math = {};\n\nmath.roundToString = function(n, decimalDigits) {\n\tvar factor = 1;\n\tfor (var i = 0; i < decimalDigits; i++) {\n\t\tfactor *= 10;\n\t}\n\tvar str = (Math.round(n * factor) / factor).toString();\n\t\n\tif (decimalDigits == 0) return str;\n\t\n\tvar dotPosition = str.indexOf(\".\");\n\tif (dotPosition === -1) {\n\t\tdotPosition = str.length;\n\t\tstr += \".0\";\n\t}\n\tfor (var i = str.length - dotPosition - 1; i < decimalDigits; i++) {\n\t\tstr += \"0\";\n\t}\n\treturn str;\n}\n\nmath.sigmoid = function(n) {\n\treturn 1 / (1 + Math.exp(-n));\n}\n\nmath.dSigmoid = function(n) {\n\treturn math.sigmoid(n) * (1 - math.sigmoid(n));\n}\n\nmodule.exports = math;","// r, g, b, a are numbers between 0 and 1\nvar Color = function(r, g, b, a) {\n\tif (a == null) a = 1;\n\tthis.r = r;\n\tthis.g = g;\n\tthis.b = b;\n\tthis.a = a;\n}\n\nColor.WHITE = new Color(1, 1, 1);\nColor.BLACK = new Color(0, 0, 0);\n\nColor.RED = new Color(226 / 255, 86 / 255, 86 / 255);\nColor.BLUE = new Color(135 / 255, 173 / 255, 236 / 255);\n\nColor.LIGHT_BLUE = new Color(186 / 255, 224 / 255, 251 / 255);\nColor.LIGHT_RED = new Color(252 / 255, 163 / 255, 163 / 255);\n\nvar p = Color.prototype;\n\n// t = 1 means replace this with color c\np.blend = function(c, t) {\n\tif (Math.abs(t) > 1) throw \"t must be a number between -1 and 1\";\n\t\n\tvar source, target;\n\tif (t >= 0) {\n\t\tsource = this;\n\t\ttarget = c;\n\t} else {\n\t\tsource = c;\n\t\ttarget = this;\n\t}\n\t\n\treturn new Color(\n\t\tsource.r * (1 - t) + target.r * t,\n\t\tsource.g * (1 - t) + target.g * t,\n\t\tsource.b * (1 - t) + target.b * t\n\t);\n}\n\np.toString = function() {\n\treturn \"rgba(\" +\n\t\tMath.floor(255 * this.r) + \", \" +\n\t\tMath.floor(255 * this.g) + \", \" +\n\t\tMath.floor(255 * this.b) + \", \" +\n\t\tthis.a\n\t\t+ \")\";\n}\n\nmodule.exports = Color;","var svg = require(\"./svg\");\nvar math = require(\"./math\");\nvar Color = require(\"./Color\");\n\nvar radius = 12;\nvar strokeWidth = 2;\n\nvar Neuron = function(layer, bias) {\n\tthis.layer = layer;\n\tthis.links = [];\n\tthis.backLinks = [];\n\tthis.bias = bias;\n\tthis.preActivation = 0;\n\tthis.activation = math.sigmoid(this.bias);\n\tthis.dActivation = 0;\n\tthis.dPreActivation = 0;\n\tthis.dBias = 0;\n\tthis.isInput = false;\n\tthis.isOutput = false;\n\n\tvar svgElement = this.svgElement = svg.createElement(\"circle\");\n\tsvgElement.setAttribute(\"r\", radius);\n}\n\nvar p = Neuron.prototype;\n\np.redraw = function() {\n\tvar circle = this.svgElement;\n\tvar position = this.getPosition();\n\tcircle.setAttribute(\"cx\", position.x);\n\tcircle.setAttribute(\"cy\", position.y);\n\t\n\tvar maxVisibleBias = 3;\n\tvar bias = this.bias;\n\tvar tFillColor;\n\tif (bias < -maxVisibleBias) bias = -maxVisibleBias;\n\telse if (bias > maxVisibleBias) bias = maxVisibleBias;\n\ttFillColor = (bias / maxVisibleBias + 1) * 0.5;\n\tvar fillColor = Color.RED.blend(Color.BLUE, tFillColor);\n\tvar strokeColor = fillColor.blend(Color.BLACK, 0.3);\n\t\n\tcircle.setAttribute(\"fill\", fillColor.toString());\n\tcircle.setAttribute(\"stroke\", strokeColor.toString());\n\tcircle.setAttribute(\"stroke-width\", strokeWidth);\n}\n\np.getIndex = function() {\n\treturn this.layer.neurons.indexOf(this);\n}\n\np.getPosition = function() {\n\tvar neuralNet = this.layer.neuralNet;\n\tvar neuronCount = this.layer.neurons.length;\n\tvar layerCount = neuralNet.layers.length;\n\tvar maxNeuronCountPerLayer = 5;\n\t\n\tvar container = neuralNet.svgElement.parentNode;\n\tif (container == null) return {x: 0, y: 0};\n\tvar containerRect = container.getBoundingClientRect();\n\tvar width = containerRect.width;\n\tvar height = containerRect.height;\n\t\n\tvar cy = height / 2;\n\tvar cx = width / 2;\n\t\n\tvar dx = (width - (radius + strokeWidth) * 2) / (layerCount - 1);\n\tvar dy = (height - (radius + strokeWidth) * 2) / (maxNeuronCountPerLayer - 1);\n\t\n\tvar x = cx + (this.layer.getIndex() - (layerCount - 1) / 2) * dx;\n\t\n\tvar y;\n\tif (neuronCount == 0) {\n\t\ty = cy;\n\t} else {\n\t\ty = cy + (this.getIndex() - (neuronCount - 1) / 2) * dy;\n\t}\n\t\n\treturn {\n\t\tx: x,\n\t\ty: y\n\t};\n}\n\np.forward = function() {\n\tthis.preActivation = 0;\n\tthis.preActivation += this.bias;\n\tfor (var i = 0; i < this.backLinks.length; i++) {\n\t\tvar link = this.backLinks[i];\n\t\tthis.preActivation += link.weight * link.n0.activation;\n\t}\n\tthis.activation = math.sigmoid(this.preActivation);\n}\n\np.backward = function(regularization) {\n\tvar regularizationError = 0;\n\t\n\tfor (var i = 0; i < this.links.length; i++) {\n\t\tvar link = this.links[i];\n\t\tthis.dActivation += link.weight * link.dWeight;\n\t}\n\t\n\tthis.dPreActivation = this.dActivation * math.dSigmoid(this.preActivation);\n\tthis.dBias = this.dPreActivation;\n\t\n\tfor (var i = 0; i < this.backLinks.length; i++) {\n\t\tvar link = this.backLinks[i];\n\t\tregularizationError += link.backward(regularization);\n\t}\n\t\n\treturn regularizationError;\n}\n\np.applyGradient = function(learningRate) {\n\tthis.bias -= learningRate * this.dBias;\n}\n\np.reset = function() {\n\tthis.preActivation = 0;\n\tthis.activation = math.sigmoid(this.bias);\n\tthis.dActivation = 0;\n\tthis.dPreActivation = 0;\n\tthis.dBias = 0;\n}\n\nNeuron.newFromData = function(layer, data) {\n\tlayer.addNeuron(data.bias);\n}\n\np.toData = function() {\n\tvar data = {};\n\tdata.bias = this.bias;\n\treturn data;\n}\n\nmodule.exports = Neuron;\n","var svg = require(\"./svg\");\nvar Color = require(\"./Color\");\n\nvar Link = function(neuralNet, n0, nf, weight) {\n\tthis.neuralNet = neuralNet;\n\tthis.n0 = n0;\n\tthis.nf = nf;\n\t\n\tif (this.n0.layer.getIndex() + 1 != this.nf.layer.getIndex()) {\n\t\tthrow \"Cannot connect neurons from non-consecutive layers\";\n\t}\n\t\n\tif (weight == null) this.weight = 1;\n\telse this.weight = weight;\n\tthis.dWeight = 0;\n\n\tthis.svgElement = svg.createElement(\"path\");\n\tthis.redraw();\n}\n\nvar p = Link.prototype;\n\np.redraw = function() {\n\tvar path = this.svgElement;\n\tvar p0 = this.n0.getPosition();\n\tvar pf = this.nf.getPosition();\n\tpath.setAttribute(\n\t\t\"d\",\n\t\t\"M\" + p0.x + \" \" + p0.y + \" \" +\n\t\t\"L\" + pf.x + \" \" + pf.y\n\t);\n\tvar maxVisibleWeight = 5;\n\tvar width = 9 * Math.min(1, Math.abs(this.weight) / maxVisibleWeight);\n\tpath.setAttribute(\"stroke-width\", width);\n\tvar color;\n\tif (this.weight < 0) color = Color.RED;\n\telse color = Color.BLUE;\n\tpath.setAttribute(\"stroke-opacity\", 0.4);\n\tpath.setAttribute(\"stroke\", color);\n}\n\np.backward = function(regularization) {\n\tvar regularizationError = 0;\n\tthis.dWeight = this.n0.activation * this.nf.dPreActivation;\n\t// regularization error = 0.5 * regularization * weight^2\n\tthis.dWeight += regularization * this.weight;\n\tregularizationError += 0.5 * regularization * this.weight * this.weight;\n\treturn regularizationError;\n}\n\np.applyGradient = function(learningRate) {\n\tthis.weight -= learningRate * this.dWeight;\n}\n\nLink.newFromData = function(neuralNet, data) {\n\tvar weight = data.weight;\n\tvar n0 = neuralNet.layers[data.n0[0]].neurons[data.n0[1]];\n\tvar nf = neuralNet.layers[data.nf[0]].neurons[data.nf[1]];\n\tvar link = neuralNet.addLink(n0, nf, weight);\n\treturn link;\n}\n\np.toData = function() {\n\tvar data = {};\n\tdata.n0 = [\n\t\tthis.n0.layer.getIndex(),\n\t\tthis.n0.getIndex()\n\t];\n\tdata.nf = [\n\t\tthis.nf.layer.getIndex(),\n\t\tthis.nf.getIndex()\n\t];\n\tdata.weight = this.weight;\n\treturn data;\n}\n\nmodule.exports = Link;\n","var svg = require(\"./svg\");\nvar Neuron = require(\"./Neuron\");\n\nvar Layer = function(neuralNet) {\n\tthis.neuralNet = neuralNet;\n\tthis.neurons = [];\n}\n\nvar p = Layer.prototype;\n\np.redraw = function() {\n\tfor (var i = 0; i < this.neurons.length; i++) {\n\t\tvar neuron = this.neurons[i];\n\t\tneuron.redraw();\n\t}\n}\n\np.reset = function() {\n\tfor (var i = 0; i < this.neurons.length; i++) {\n\t\tvar neuron = this.neurons[i];\n\t\tneuron.reset();\n\t}\n}\n\np.addNeuron = function(bias) {\n\tif (bias == null) bias = 0.5;\n\tvar neuron = new Neuron(this, bias);\n\tthis.neurons.push(neuron);\n\tthis.neuralNet.neurons.push(neuron);\n\tthis.neuralNet.svgNeurons.appendChild(neuron.svgElement);\n\treturn neuron;\n}\n\np.getNeuronAt = function(i) {\n\treturn this.neurons[i];\n}\n\np.getNeuronCount = function() {\n\treturn this.neurons.length;\n}\n\np.getIndex = function() {\n\treturn this.neuralNet.layers.indexOf(this);\n}\n\nLayer.newFromData = function(neuralNet, data) {\n\tvar layer = neuralNet.addLayer();\n\tfor (var i = 0; i < data.neurons.length; i++) {\n\t\tvar neuronData = data.neurons[i];\n\t\tNeuron.newFromData(layer, data);\n\t}\n\treturn layer;\n}\n\np.toData = function() {\n\tvar data = {};\n\t\n\tdata.neurons = [];\n\tfor (var i = 0; i < this.neurons.length; i++) {\n\t\tvar neuron = this.neurons[i];\n\t\tdata.neurons.push(neuron.toData());\n\t}\n\t\n\treturn data;\n}\n\nmodule.exports = Layer;\n","var svg = require(\"./svg\");\nvar Neuron = require(\"./Neuron\");\nvar Link = require(\"./Link\");\nvar Layer = require(\"./Layer\");\n\nvar NeuralNet = function() {\n\tthis.neurons = [];\n\tthis.links = [];\n\tthis.layers = [];\n\n\tthis.svgElement = svg.createElement(\"g\");\n\t\n\tthis.svgLinks = svg.createElement(\"g\");\n\tthis.svgElement.appendChild(this.svgLinks);\n\t\n\tthis.svgNeurons = svg.createElement(\"g\");\n\tthis.svgElement.appendChild(this.svgNeurons);\n}\n\nvar p = NeuralNet.prototype;\n\np.addLayer = function(neuronCount) {\n\tif (neuronCount == null) neuronCount = 0;\t\n\t\n\tvar layer = new Layer(this);\n\tthis.layers.push(layer);\n\t\n\tfor (var i = 0; i < neuronCount; i++) {\n\t\tvar neuron = layer.addNeuron();\n\t}\n\t\n\treturn layer;\n}\n\np.addFullyConnectedLayer = function(neuronCount) {\n\tvar l0 = this.layers[this.layers.length - 1];\n\tthis.addLayer(neuronCount);\n\tvar lf = this.layers[this.layers.length - 1];\n\tfor (var i = 0; i < l0.neurons.length; i++) {\n\t\tvar n0 = l0.neurons[i];\n\t\tfor (var j = 0; j < lf.neurons.length; j++) {\n\t\t\tvar nf = lf.neurons[j];\n\t\t\tthis.addLink(n0, nf);\n\t\t}\n\t}\n}\n\np.addLink = function(n0, nf, weight) {\n\tvar link = new Link(this, n0, nf, weight);\n\tn0.links.push(link);\n\tnf.backLinks.push(link);\n\tthis.links.push(link);\n\tthis.svgLinks.appendChild(link.svgElement);\n\treturn link;\n}\n\np.redraw = function() {\n\tfor (var i = 0; i < this.layers.length; i++) {\n\t\tvar layer = this.layers[i];\n\t\tlayer.redraw();\n\t}\n\tfor (var i = 0; i < this.links.length; i++) {\n\t\tvar link = this.links[i];\n\t\tlink.redraw();\n\t}\n}\n\np.reset = function(input) {\n\tfor (var i = 0; i < this.layers.length; i++) {\n\t\tvar layer = this.layers[i];\n\t\tlayer.reset();\n\t}\n}\n\np.randomizeParameters = function() {\n\tfor (var i = 0; i < this.links.length; i++) {\n\t\tvar link = this.links[i];\n\t\tvar weight = 2 + Math.random() * 4;\n\t\tif (Math.random() <= 0.5) weight *= -1;\n\t\tlink.weight = weight;\n\t}\n\t\n\tfor (var i = 0; i < this.neurons.length; i++) {\n\t\tvar neuron = this.neurons[i];\n\t\tvar bias = 1 + Math.random() * 2;\n\t\tif (Math.random() <= 0.5) bias *= -1;\n\t\tneuron.bias = bias;\n\t}\n}\n\np.forward = function(input) {\n\tfor (var i = 1; i < this.layers.length; i++) {\n\t\tvar layer = this.layers[i];\n\t\tfor (var j = 0; j < layer.neurons.length; j++) {\n\t\t\tvar neuron = layer.neurons[j];\n\t\t\tneuron.forward();\n\t\t}\n\t}\n}\n\np.backward = function(learningRate, regularization) {\n\tregularizationError = 0;\n\t\n\tfor (var i = this.layers.length - 1; i >= 0; i--) {\n\t\tvar layer = this.layers[i];\n\t\tfor (var j = 0; j < layer.neurons.length; j++) {\n\t\t\tvar neuron = layer.neurons[j];\n\t\t\tregularizationError += neuron.backward(regularization);\n\t\t}\n\t}\n\t\n\tthis.applyGradient(learningRate);\n\t\n\treturn regularizationError;\n}\n\np.applyGradient = function(learningRate) {\n\tfor (var i = 0; i < this.links.length; i++) {\n\t\tvar link = this.links[i];\n\t\tlink.applyGradient(learningRate);\n\t}\n\t\n\tfor (var i = 1; i < this.layers.length; i++) {\n\t\tvar layer = this.layers[i];\n\t\tfor (var j = 0; j < layer.neurons.length; j++) {\n\t\t\tvar neuron = layer.neurons[j];\n\t\t\tneuron.applyGradient(learningRate);\n\t\t}\n\t}\n}\n\nNeuralNet.newFromData = function(data) {\n\tvar neuralNet = new NeuralNet();\n\t\n\tfor (var i = 0; i < data.layers.length; i++) {\n\t\tvar layerData = data.layers[i];\n\t\tLayer.newFromData(neuralNet, layerData);\n\t}\n\t\n\tfor (var i = 0; i < data.links.length; i++) {\n\t\tvar linkData = data.links[i];\n\t\tLink.newFromData(neuralNet, linkData);\n\t}\n\t\n\treturn neuralNet;\n}\n\np.toData = function() {\n\tvar data = {};\n\t\n\tdata.layers = [];\n\tfor (var i = 0; i < this.layers.length; i++) {\n\t\tvar layer = this.layers[i];\n\t\tdata.layers.push(layer.toData());\n\t}\n\t\n\tdata.links = [];\n\tfor (var i = 0; i < this.links.length; i++) {\n\t\tvar link = this.links[i];\n\t\tdata.links.push(link.toData());\n\t}\n\t\n\treturn data;\n}\n\nmodule.exports = NeuralNet;\n","var Color = require(\"./Color\");\n\nvar DataPoint = function(canvas, x, y, label) {\n\tthis.canvas = canvas;\n\tthis.x = x;\n\tthis.y = y;\n\tthis.label = label;\n\tthis.radius = 5;\n}\n\nvar p = DataPoint.prototype;\n\np.redraw = function() {\n\tvar ctx = this.canvas.ctx;\n\tvar width = this.canvas.domElement.width;\n\tvar height = this.canvas.domElement.height;\n\t\n\tvar fillColor;\n\tif (this.label == 0) fillColor = Color.RED;\n\telse fillColor = Color.BLUE;\n\tvar strokeColor = fillColor.blend(Color.BLACK, 0.6);\n\t\n\tctx.beginPath();\n\tctx.fillStyle = fillColor.toString();\n\tctx.strokeStyle = strokeColor.toString();\n\tctx.arc(\n\t\tthis.x * width, this.y * height,\n\t\tthis.radius,\n\t\t0, 2 * Math.PI\n\t);\n\tctx.fill();\n\tctx.stroke();\n}\n\nmodule.exports = DataPoint;","var Color = require(\"./Color\");\nvar DataPoint = require(\"./DataPoint\");\n\nvar DataCanvas = function() {\n\tthis.dataPoints = [];\n\tvar canvas = this.domElement = document.createElement(\"canvas\");\n\tcanvas.width = 250;\n\tcanvas.height = 250;\n\tthis.ctx = canvas.getContext(\"2d\");\n\n\tthis.width = 50;\n\tthis.height = 50;\n\tthis.pixelColors = [];\n\tfor (var i = 0; i < this.width; i++) {\n\t\tthis.pixelColors.push([]);\n\t\tfor (var j = 0; j < this.height; j++) {\n\t\t\tthis.pixelColors[i].push(0);\n\t\t}\n\t}\n\n\tthis.setUpDragBehavior();\n}\n\nvar p = DataCanvas.prototype;\n\np.addDataPoint = function(x, y, label) {\n\tthis.dataPoints.push(new DataPoint(this, x, y, label));\n}\n\np.redraw = function(classify) {\n\tvar ctx = this.ctx;\n\tvar canvas = this.domElement;\n\tvar canvasWidth = canvas.width;\n\tvar canvasHeight = canvas.height;\n\n\tvar width = this.width;\n\tvar height = this.height;\n\n\tfor (var i = 0; i < width; i++) {\n\t\tfor (var j = 0; j < height; j++) {\n\t\t\tvar label = classify(i / width, j / height);\n\t\t\tvar color = Color.LIGHT_RED.blend(Color.LIGHT_BLUE, label);\n\t\t\tthis.pixelColors[i][j] = color;\n\t\t}\n\t}\n\n\tvar fWidth = canvasWidth / width;\n\tvar fHeight = canvasHeight / height;\n\tvar canvasImageData = ctx.getImageData(0, 0, canvasWidth, canvasHeight);\n\tctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\tfor (var i = 0; i < canvasImageData.data.length / 4; i++) {\n\t\tvar y = Math.floor(i / canvasWidth);\n\t\tvar x = i % canvasWidth;\n\t\tvar ii = Math.floor(x / fWidth);\n\t\tvar jj = Math.floor(y / fHeight);\n\t\tvar color = this.pixelColors[ii][jj];\n\t\tcanvasImageData.data[4 * i] = Math.round(color.r * 255);\n\t\tcanvasImageData.data[4 * i + 1] = Math.round(color.g * 255);\n\t\tcanvasImageData.data[4 * i + 2] = Math.round(color.b * 255);\n\t\tcanvasImageData.data[4 * i + 3] = 255;\n\t}\n\tctx.putImageData(canvasImageData, 0, 0);\n\n\tfor (var i = 0; i < this.dataPoints.length; i++) {\n\t\tvar dataPoint = this.dataPoints[i];\n\t\tdataPoint.redraw();\n\t}\n}\n\np.computeCursor = function(event) {\n\tvar rect = this.domElement.getBoundingClientRect();\n\tvar clientX, clientY;\n\tif (event.touches == null) {\n\t\tclientX = event.clientX;\n\t\tclientY = event.clientY;\n\t} else {\n\t\tclientX = event.touches[0].clientX;\n\t\tclientY = event.touches[0].clientY;\n\t}\n\tvar left = clientX - rect.left;\n\tvar top = clientY - rect.top;\n\tvar cursor = {x: left, y: top};\n\tevent.cursor = cursor;\n}\n\np.setUpDragBehavior = function() {\n\tvar canvas = this.domElement;\n\n\tthis.dragState = null;\n\n\tthis.handleDragBegin = this.handleDragBegin.bind(this);\n\tcanvas.addEventListener(\"touchstart\", this.handleDragBegin);\n\tcanvas.addEventListener(\"mousedown\", this.handleDragBegin);\n\n\tthis.handleDragProgress = this.handleDragProgress.bind(this);\n\twindow.addEventListener(\"mousemove\", this.handleDragProgress);\n\twindow.addEventListener(\"touchmove\", this.handleDragProgress);\n\n\tthis.handleDragEnd = this.handleDragEnd.bind(this);\n\twindow.addEventListener(\"mouseup\", this.handleDragEnd);\n\twindow.addEventListener(\"touchend\", this.handleDragEnd);\n\twindow.addEventListener(\"touchcancel\", this.handleDragEnd);\n}\n\np.handleDragBegin = function(event) {\n\tevent.preventDefault();\n\tthis.computeCursor(event);\n\n\tfor (var i = 0; i < this.dataPoints.length; i++) {\n\t\tvar dataPoint = this.dataPoints[i];\n\n\t\tvar dx = event.cursor.x - dataPoint.x * this.domElement.width;\n\t\tvar dy = event.cursor.y - dataPoint.y * this.domElement.height;\n\n\t\tvar r = dataPoint.radius;\n\n\t\tif (dx * dx + dy * dy <= r * r) {\n\t\t\tthis.dragState = {\n\t\t\t\tdataPoint: dataPoint,\n\t\t\t\toffset: {x: dx, y: dy}\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\np.handleDragProgress = function(event) {\n\tif (this.dragState == null) return;\n\tthis.computeCursor(event);\n\tevent.preventDefault();\n\n\tvar dataPoint = this.dragState.dataPoint;\n\tvar offset = this.dragState.offset;\n\n\tdataPoint.x = (event.cursor.x - offset.x) / this.domElement.width;\n\tdataPoint.y = (event.cursor.y - offset.y) / this.domElement.height;\n\n\tif (dataPoint.x < 0) dataPoint.x = 0;\n\telse if (dataPoint.x > 1) dataPoint.x = 1;\n\tif (dataPoint.y < 0) dataPoint.y = 0;\n\telse if (dataPoint.y > 1) dataPoint.y = 1;\n}\n\np.handleDragEnd = function(event) {\n\tif (this.dragState == null) return;\n\tvar dataPoint = this.dragState.dataPoint;\n\tthis.dragState = null;\n}\n\nDataCanvas.newFromData = function(data) {\n\tvar dataCanvas = new DataCanvas();\n\tfor (var i = 0; i < data.length; i++) {\n\t\tvar item = data[i];\n\t\tdataCanvas.addDataPoint(item.x, item.y, item.label);\n\t}\n\treturn dataCanvas;\n}\n\np.toData = function() {\n\tvar data = [];\n\tfor (var i = 0; i < this.dataPoints.length; i++) {\n\t\tvar dataPoint = this.dataPoints[i];\n\t\tdata.push({\n\t\t\tx: dataPoint.x,\n\t\t\ty: dataPoint.y,\n\t\t\tlabel: dataPoint.label\n\t\t});\n\t}\n\treturn data;\n}\n\nmodule.exports = DataCanvas;\n","var minTopError = 4;\n\nvar ErrorPlot = function() {\t\n\tvar canvas = this.domElement = document.createElement(\"canvas\");\n\tcanvas.id = \"error-canvas\";\n\tthis.ctx = canvas.getContext(\"2d\");\t\n\tthis.maxDataLength = canvas.width;\n\tthis.data = [];\n\tthis.topError = minTopError;\n}\n\nvar p = ErrorPlot.prototype;\n\np.getMaxTotalError = function() {\n\tvar max = 0;\n\tfor (var i = 0; i < this.data.length; i++) {\n\t\tvar item = this.data[i];\n\t\tvar totalError = item.totalError;\n\t\tif (totalError > max) max = totalError;\n\t}\n\treturn max;\n}\n\np.update = function(dataError, regularizationError) {\n\tif (this.data.length == this.maxDataLength) {\n\t\tthis.data.shift();\n\t}\n\tvar totalError = dataError + regularizationError;\n\tthis.data.push({\n\t\tdataError: dataError,\n\t\tregularizationError: regularizationError,\n\t\ttotalError: totalError\n\t});\n\tvar maxTotalError = this.getMaxTotalError();\n\tif (maxTotalError > minTopError) this.topError = maxTotalError;\n\telse this.topError = minTopError;\n\tthis.redraw();\n}\n\np.redraw = function() {\t\n\tvar ctx = this.ctx;\n\tvar width = this.domElement.width;\n\tvar height = this.domElement.height;\n\tctx.clearRect(0, 0, width, height);\n\t\n\tfor (var i = 1; i < this.data.length; i++) {\n\t\tvar item = this.data[i];\n\t\tvar totalError = item.totalError;\n\t\tvar x = i / (this.maxDataLength - 1) * width;\n\t\tvar y = height * (1 - totalError / this.topError);\n\t\tctx.beginPath();\n\t\tctx.strokeStyle = \"rgb(255, 221, 78)\";\n\t\tctx.moveTo(x, height);\n\t\tctx.lineTo(x, y);\n\t\tctx.stroke();\n\t}\n}\n\nmodule.exports = ErrorPlot;","var math = require(\"./math\");\nvar ErrorPlot = require(\"./ErrorPlot\");\n\nvar ControlPanel = function(neuralNet, controllableParameters) {\n\tvar div = this.domElement = document.createElement(\"div\");\n\tdiv.className = \"control-panel\";\n\t\n\tthis.rows = [];\n\tthis.rowsByLabel = {};\n\tvar row;\n\t\n\trow = this.addRow(\"full\");\n\tvar btnRandomize = document.createElement(\"div\");\n\tbtnRandomize.innerHTML = \"randomize network parameters\";\n\tbtnRandomize.className = \"btn\";\n\trow.cells[0].appendChild(btnRandomize);\n\tbtnRandomize.addEventListener(\"click\", function() {\n\t\tneuralNet.randomizeParameters();\n\t});\n\t\n\trow = this.addRow(\"slider\", \"learning rate\");\n\trow.control.min = 1;\n\trow.control.max = 80;\n\trow.control.value = Math.round(controllableParameters.learningRate * 100);\n\trow.control.addEventListener(\"change\", function() {\n\t\tcontrollableParameters.learningRate = this.value / 100;\n\t}.bind(row.control));\n\t\n\trow = this.addRow(\"slider\", \"regularization\");\n\trow.control.min = 0;\n\trow.control.max = 100;\n\trow.control.value = Math.round(controllableParameters.regularization * 1000000);\n\trow.control.addEventListener(\"change\", function() {\n\t\tcontrollableParameters.regularization = this.value / 1000000;\n\t}.bind(row.control));\n\t\n\trow = this.addRow(\"text\", \"error\");\n\trow.control.className = \"formatted-number\";\n\t\t\n\trow = this.addRow(\"full\");\n\tvar errorPlot = this.errorPlot = new ErrorPlot();\n\trow.cells[0].appendChild(errorPlot.domElement);\n}\n\nvar p = ControlPanel.prototype;\n\np.addCell = function(row) {\n\tcell = document.createElement(\"div\");\n\tcell.className = \"control-cell\";\n\trow.appendChild(cell);\n\trow.cells.push(cell);\n\treturn cell;\n}\n\np.addRow = function(type, label) {\n\tvar row = document.createElement(\"div\");\n\trow.cells = [];\n\trow.className = \"control-row\";\n\tthis.domElement.appendChild(row);\n\tthis.rows.push(row);\n\tthis.rowsByLabel[label] = row;\n\t\n\tvar cell;\n\t\n\tif (type == \"full\") {\n\t\tcell = document.createElement(\"div\");\n\t\tcell.className = \"control-cell-full\";\n\t\trow.appendChild(cell);\n\t\trow.cells.push(cell);\n\t} else {\n\t\tcell = this.addCell(row);\n\t\tcell.innerHTML = label;\n\t\t\n\t\tcell = this.addCell(row);\n\t\tvar control;\n\t\tswitch (type) {\n\t\t\tcase \"slider\":\n\t\t\t\tcontrol = document.createElement(\"input\");\n\t\t\t\tcontrol.type = \"range\";\n\t\t\t\tbreak;\n\t\t\tcase \"text\":\n\t\t\t\tcontrol = cell;\n\t\t\t\tbreak;\n\t\t\t\tbreak;\n\t\t}\n\t\tif (control != cell && control != null) cell.appendChild(control);\n\t\t\n\t\trow.control = control;\n\t}\n\t\n\treturn row;\n}\n\np.update = function(data) {\n\tthis.rowsByLabel[\"error\"].control.innerHTML =\n\t\tmath.roundToString(data.totalError, 10);\n\tthis.errorPlot.update(data.dataError, data.regularizationError);\n}\n\nmodule.exports = ControlPanel;\n","module.exports={\"dataPoints\":[{\"x\":0.08,\"y\":0.24,\"label\":1},{\"x\":0.2,\"y\":0.27,\"label\":1},{\"x\":0.05,\"y\":0.3,\"label\":1},{\"x\":0.1,\"y\":0.1,\"label\":1},{\"x\":0.4,\"y\":0.4,\"label\":0},{\"x\":0.6,\"y\":0.4,\"label\":0},{\"x\":0.65,\"y\":0.7,\"label\":0},{\"x\":0.7,\"y\":0.3,\"label\":0},{\"x\":0.35,\"y\":0.65,\"label\":0},{\"x\":0.3,\"y\":0.5,\"label\":0},{\"x\":0.7,\"y\":0.5,\"label\":0},{\"x\":0.75,\"y\":0.55,\"label\":0},{\"x\":0.7,\"y\":0.6,\"label\":0},{\"x\":0.65,\"y\":0.34,\"label\":0},{\"x\":0.8,\"y\":0.65,\"label\":0},{\"x\":0.5,\"y\":0.7,\"label\":0},{\"x\":0.5,\"y\":0.66,\"label\":0},{\"x\":0.56,\"y\":0.66,\"label\":0},{\"x\":0.46,\"y\":0.36,\"label\":0},{\"x\":0.46,\"y\":0.26,\"label\":0},{\"x\":0.36,\"y\":0.26,\"label\":0},{\"x\":0.26,\"y\":0.36,\"label\":0},{\"x\":0.56,\"y\":0.28,\"label\":0},{\"x\":0.33,\"y\":0.54,\"label\":0},{\"x\":0.23,\"y\":0.52,\"label\":0},{\"x\":0.26,\"y\":0.16,\"label\":1},{\"x\":0.06,\"y\":0.46,\"label\":1},{\"x\":0.13,\"y\":0.66,\"label\":1},{\"x\":0.2,\"y\":0.8,\"label\":1},{\"x\":0.5,\"y\":0.5,\"label\":1},{\"x\":0.45,\"y\":0.5,\"label\":1},{\"x\":0.5,\"y\":0.45,\"label\":1},{\"x\":0.45,\"y\":0.45,\"label\":1},{\"x\":0.55,\"y\":0.55,\"label\":1},{\"x\":0.5,\"y\":0.55,\"label\":1},{\"x\":0.5,\"y\":0.2,\"label\":1},{\"x\":0.4,\"y\":0.1,\"label\":1},{\"x\":0.6,\"y\":0.1,\"label\":1},{\"x\":0.75,\"y\":0.15,\"label\":1},{\"x\":0.88,\"y\":0.22,\"label\":1},{\"x\":0.9,\"y\":0.35,\"label\":1},{\"x\":0.9,\"y\":0.49,\"label\":1},{\"x\":0.88,\"y\":0.62,\"label\":1},{\"x\":0.9,\"y\":0.9,\"label\":1},{\"x\":0.9,\"y\":0.8,\"label\":1},{\"x\":0.75,\"y\":0.85,\"label\":1},{\"x\":0.55,\"y\":0.92,\"label\":1},{\"x\":0.6,\"y\":0.95,\"label\":1},{\"x\":0.06,\"y\":0.57,\"label\":1},{\"x\":0.09,\"y\":0.8,\"label\":1},{\"x\":0.4,\"y\":0.9,\"label\":1}],\"neuralNet\":{\"layers\":[{\"neurons\":[{\"bias\":0.5},{\"bias\":0.5}]},{\"neurons\":[{\"bias\":0.5},{\"bias\":0.5},{\"bias\":0.5},{\"bias\":0.5},{\"bias\":0.5}]},{\"neurons\":[{\"bias\":0.5},{\"bias\":0.5},{\"bias\":0.5},{\"bias\":0.5},{\"bias\":0.5}]},{\"neurons\":[{\"bias\":0.5},{\"bias\":0.5}]},{\"neurons\":[{\"bias\":0.5}]}],\"links\":[{\"n0\":[0,0],\"nf\":[1,0],\"weight\":2.2559318523672673},{\"n0\":[0,0],\"nf\":[1,1],\"weight\":3.7705902078344162},{\"n0\":[0,0],\"nf\":[1,2],\"weight\":-5.673868837964195},{\"n0\":[0,0],\"nf\":[1,3],\"weight\":-2.552116396138559},{\"n0\":[0,0],\"nf\":[1,4],\"weight\":-4.765897189158554},{\"n0\":[0,1],\"nf\":[1,0],\"weight\":2.522847383501193},{\"n0\":[0,1],\"nf\":[1,1],\"weight\":-2.9902303588384505},{\"n0\":[0,1],\"nf\":[1,2],\"weight\":2.749623598598969},{\"n0\":[0,1],\"nf\":[1,3],\"weight\":-2.0657459601688077},{\"n0\":[0,1],\"nf\":[1,4],\"weight\":2.311040191441733},{\"n0\":[1,0],\"nf\":[2,0],\"weight\":-2.8083933750840506},{\"n0\":[1,0],\"nf\":[2,1],\"weight\":2.368208438212055},{\"n0\":[1,0],\"nf\":[2,2],\"weight\":2.792010178964303},{\"n0\":[1,0],\"nf\":[2,3],\"weight\":2.1204797088106764},{\"n0\":[1,0],\"nf\":[2,4],\"weight\":3.0855603411983634},{\"n0\":[1,1],\"nf\":[2,0],\"weight\":-2.1619760012233913},{\"n0\":[1,1],\"nf\":[2,1],\"weight\":2.7735676578848043},{\"n0\":[1,1],\"nf\":[2,2],\"weight\":-4.795321974592097},{\"n0\":[1,1],\"nf\":[2,3],\"weight\":-3.1618858651724424},{\"n0\":[1,1],\"nf\":[2,4],\"weight\":2.642537468325151},{\"n0\":[1,2],\"nf\":[2,0],\"weight\":5.111269168104936},{\"n0\":[1,2],\"nf\":[2,1],\"weight\":1.8060793114773712},{\"n0\":[1,2],\"nf\":[2,2],\"weight\":1.2874475479043777},{\"n0\":[1,2],\"nf\":[2,3],\"weight\":3.715659708889894},{\"n0\":[1,2],\"nf\":[2,4],\"weight\":-5.479057778095251},{\"n0\":[1,3],\"nf\":[2,0],\"weight\":4.279970838297447},{\"n0\":[1,3],\"nf\":[2,1],\"weight\":-3.8573191202934085},{\"n0\":[1,3],\"nf\":[2,2],\"weight\":-4.346636276004062},{\"n0\":[1,3],\"nf\":[2,3],\"weight\":1.8026421918582567},{\"n0\":[1,3],\"nf\":[2,4],\"weight\":3.9687935202147346},{\"n0\":[1,4],\"nf\":[2,0],\"weight\":-3.5216391228147197},{\"n0\":[1,4],\"nf\":[2,1],\"weight\":4.599458665307638},{\"n0\":[1,4],\"nf\":[2,2],\"weight\":-4.752572287153145},{\"n0\":[1,4],\"nf\":[2,3],\"weight\":-3.810827524569661},{\"n0\":[1,4],\"nf\":[2,4],\"weight\":3.0650028924296953},{\"n0\":[2,0],\"nf\":[3,0],\"weight\":-4.300364295192499},{\"n0\":[2,0],\"nf\":[3,1],\"weight\":-2.9036061692080217},{\"n0\":[2,1],\"nf\":[3,0],\"weight\":4.132576329093505},{\"n0\":[2,1],\"nf\":[3,1],\"weight\":-3.817976850598705},{\"n0\":[2,2],\"nf\":[3,0],\"weight\":4.606542085589321},{\"n0\":[2,2],\"nf\":[3,1],\"weight\":2.8220313920923323},{\"n0\":[2,3],\"nf\":[3,0],\"weight\":2.3423002019828885},{\"n0\":[2,3],\"nf\":[3,1],\"weight\":2.098573708791525},{\"n0\":[2,4],\"nf\":[3,0],\"weight\":4.4760505444141625},{\"n0\":[2,4],\"nf\":[3,1],\"weight\":3.95752484391276},{\"n0\":[3,0],\"nf\":[4,0],\"weight\":-0.7265226578414495},{\"n0\":[3,1],\"nf\":[4,0],\"weight\":-4.316679309853457}]}}","var NeuralNet = require(\"./NeuralNet\");\nvar DataCanvas = require(\"./DataCanvas\");\nvar ControlPanel = require(\"./ControlPanel\");\nvar svg = require(\"./svg\");\n\nwindow.neuralNet;\nwindow.dataCanvas;\nwindow.controllableParameters;\nwindow.controlPanel;\n\nfunction init() {\n\tvar data = require(\"./data\");\n\t\n\tcontrollableParameters = {\n\t\tlearningRate: 0.2,\n\t\tregularization: 0.000009\n\t};\n\t\n\tvar container = document.createElement(\"div\");\n\tcontainer.className = \"content-container\";\n\tdocument.body.appendChild(container);\n\t\n\tvar row;\n\t\n\trow = document.createElement(\"div\");\n\tcontainer.appendChild(row);\n\trow.className = \"content-container-row\";\n\t\n\tvar svgNeuralNet = svg.createElement(\"svg\");\n\tsvgNeuralNet.className = \"content-container-cell\";\n\tsvgNeuralNet.id = \"neural-net\";\n\trow.appendChild(svgNeuralNet);\n\t\n\tneuralNet = NeuralNet.newFromData(data.neuralNet);\n\tsvgNeuralNet.appendChild(neuralNet.svgElement);\n\t\n\tdataCanvas = DataCanvas.newFromData(data.dataPoints);\n\tdataCanvas.domElement.className += \" content-container-cell\";\n\tdataCanvas.domElement.id = \"data-canvas\";\n\trow.appendChild(dataCanvas.domElement);\n\t\n\trow = document.createElement(\"div\");\n\tcontainer.appendChild(row);\n\trow.className = \"content-container-row\";\n\t\n\tcontrolPanel = new ControlPanel(neuralNet, controllableParameters);\n\tcontrolPanel.domElement.className += \" content-container-cell\";\n\trow.appendChild(controlPanel.domElement);\n\t\n\tupdate();\n}\n\nfunction update() {\n\tfor (var i = 0; i < 10; i++) {\n\t\tvar dataError = 0;\n\t\tvar regularizationError;\n\t\t\n\t\tfor (var j = 0; j < dataCanvas.dataPoints.length; j++) {\n\t\t\tneuralNet.reset();\n\t\t\t\n\t\t\tvar dataPoint = dataCanvas.dataPoints[j];\n\t\t\tneuralNet.layers[0].neurons[0].activation = dataPoint.x;\n\t\t\tneuralNet.layers[0].neurons[1].activation = dataPoint.y;\n\t\t\tneuralNet.forward();\n\t\t\t\n\t\t\tvar neuron = neuralNet.layers[neuralNet.layers.length - 1].neurons[0];\n\t\t\tvar output = neuron.activation;\n\t\t\tvar d = dataPoint.label - output;\n\t\t\tdataError += 0.5 * d * d;\n\t\t\tneuron.dActivation = -d;\n\t\t\t\n\t\t\tregularizationError = neuralNet.backward(\n\t\t\t\tcontrollableParameters.learningRate,\n\t\t\t\tcontrollableParameters.regularization\n\t\t\t);\n\t\t}\n\t}\n\t\t\n\tneuralNet.redraw();\n\tdataCanvas.redraw(function(x, y) {\n\t\tneuralNet.layers[0].neurons[0].activation = x;\n\t\tneuralNet.layers[0].neurons[1].activation = y;\n\t\tneuralNet.forward();\n\t\treturn neuralNet.layers[neuralNet.layers.length - 1].neurons[0].activation;\n\t});\n\tcontrolPanel.update({\n\t\ttotalError: dataError + regularizationError,\n\t\tdataError: dataError,\n\t\tregularizationError: regularizationError\n\t});\n\t\n\trequestAnimationFrame(update);\n}\n\nfunction getData() {\n\treturn {\n\t\tdataPoints: dataCanvas.toData(),\n\t\tneuralNet: neuralNet.toData()\n\t}\n}\nwindow.getData = getData;\n\ninit();\n"]}